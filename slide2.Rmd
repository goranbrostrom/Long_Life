---
output:
  beamer_presentation:
    fig_caption: no
    fig_width: 5
    includes:
      before_body: gb_beforebody.txt
      in_header: gb_header.txt
  ioslides_presentation: default
  slidy_presentation: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

## svt.se, October 2016

\begin{center}
\includegraphics[width = \textwidth]{myfigs/svt3.png}
\end{center}
## Jeanne Calment, age 122.

\includegraphics[width = \textwidth]{PDF/NYT.png}

## Nature, 2016

\includegraphics[width=\textwidth]{PDF/nat16.png}

## Nature, 2017

\includegraphics[width=\textwidth]{PDF/nat17.png}

## Nature, 2017

\begin{columns}

\begin{column}{0.46\textwidth}

\includegraphics[width=\textwidth]{PDF/discnat1.png}

\end{column}

\begin{column}{0.46\textwidth}

\includegraphics[width=\textwidth]{PDF/discnat2.png}

\end{column}

\end{columns}

## Nature 2017

\includegraphics[width=\textwidth]{PDF/discnat1.png}

## Dong, Milholland & Vijg, Nature 2016.

\includegraphics[width=\textwidth, height=0.9\textheight]{myfigs/repage.png}

## James Vaupel, off the record

\Large
"I was outraged that Nature, a journal I highly respect, would publish such a travesty." 

## The Human Mortality Database

```{r dataswed, echo=FALSE}
deaths <- read.table("data/HMD/Deaths_1x1.txt", header = TRUE, skip = 3, stringsAsFactors = FALSE, na.strings = ".")
##head(deaths)
expos <- read.table("data/HMD/Exposures_1x1.txt", header = TRUE, skip = 3, stringsAsFactors = FALSE, na.strings = ".")
##head(expos)
rates <- read.table("data/HMD/Mx_1x1.txt", header = TRUE, skip = 3, stringsAsFactors = FALSE, na.strings = ".")
str(rates)
```

## The International Database on Longevity

```{r idldata, fig.width=10}
library(lubridate)
options(stringsAsFactors = FALSE)
usa <- read.table("data/IDL/USA/usa.csv", header = TRUE, sep = ";")
usa$year <- usa$Date.of.death
usa$age <- usa$Age.days. / 365.25
usa$country = "usa"
uk <- read.table("data/IDL/UK/uk.csv", header = TRUE, sep = ";")
uk$age <- uk$Age.days. / 365.25
uk$year <- year(as.Date(uk$Date.of.death, format = "%d/%m/%Y"))
uk$country <- "uk"
japan <- read.table("data/IDL/Japan/japan.csv", header = TRUE, sep = ";")
japan$year <- year(as.Date(japan$Date.of.death, format = "%d/%m/%Y"))
japan$age <- japan$Age.days. / 365.25
japan$country <- "japan"
france <- read.table("data/IDL/France/france.csv", header = TRUE, sep = ";")
france$year <- year(as.Date(france$Date.of.death, format = "%d/%m/%Y"))
france$age <- france$Age.days. / 365.25
france$country <- "france"
all <- rbind(usa[, c("year", "age", "Sex", "country")],
             uk[, c("year", "age", "Sex", "country")],
             france[, c("year", "age", "Sex", "country")],
             japan[, c("year", "age", "Sex", "country")])
```

```{r plotthem}
x <- with(all, tapply(age, year, max))
years <- sort(unique(all$year))
plot(years, x, xlab = "Year", ylab = "Age", ylim = c(110, 123), col = "blue")
abline(h = 110)
abline(h = 111:120, lty = 3, col = "green")    
## with(usa, points(Date.of.death, Age.days. / 365.25, cex = 0.25, col = "blue"))
```
